document.addEventListener("DOMContentLoaded",()=>{let n=document.getElementById("carousel-track"),r=document.getElementById("carousel-container"),l=document.getElementById("service-list"),i=document.getElementById("servicesGrid"),c=document.getElementById("filterControls");var o=document.getElementById("hero-carousel");let t=document.getElementById("subItemsModal"),s=t?t.querySelector(".modal-items"):null;var e=t?t.querySelector(".modal-close"):null;let d=t?t.querySelector("#quoteBtn"):null,m=e=>{d&&(d.href="contact.html?service="+e,d.style.display="block",d.classList.remove("animate"),d.offsetWidth,d.classList.add("animate"))},u=(e,a=null)=>{t&&s&&(s.innerHTML="",e.forEach(e=>{let t=document.createElement("div");t.className="sub-item-card",t.dataset.serviceId=e.id,a&&e.id===a&&t.classList.add("highlight"),t.innerHTML=`
        <img src="${e.img}" alt="${e.name}">
        <h4>${e.name}</h4>`,t.addEventListener("click",()=>{s.querySelectorAll(".sub-item-card").forEach(e=>e.classList.remove("highlight")),t.classList.add("highlight"),m(e.id)}),s.appendChild(t)}),t.classList.add("open"),d&&(d.style.display="none",d.classList.remove("animate")),a)&&(e=s.querySelector(`.sub-item-card[data-service-id="${a}"]`))&&(m(a),e.scrollIntoView({behavior:"smooth",block:"center"}))},a=()=>{t&&t.classList.remove("open"),d&&(d.style.display="none",d.classList.remove("animate"))};if(e&&e.addEventListener("click",a),t&&t.addEventListener("click",e=>{e.target===t&&a()}),o){let e=o.querySelector(".slides"),t=o.querySelectorAll("img"),a=0,s=()=>{e.style.transform=`translateX(-${100*a}%)`},n=()=>{a=(a+1)%t.length,s()},r=setInterval(n,4e3),l=0;o.addEventListener("touchstart",e=>{l=e.touches[0].clientX,clearInterval(r)}),o.addEventListener("touchend",e=>{e=e.changedTouches[0].clientX-l;50<e?a=(a-1+t.length)%t.length:e<-50&&(a=(a+1)%t.length),s(),r=setInterval(n,4e3)})}if(n&&r){projectImages.forEach(e=>{var t=document.createElement("div");t.className="carousel-item",t.innerHTML=`<img src="${e.src}" alt="${e.alt}">`,n.appendChild(t)}),Array.from(n.children).forEach(e=>{e=e.cloneNode(!0);e.classList.add("clone"),n.appendChild(e)});let t,a=n.scrollWidth/2;e=()=>{let e=()=>{r.scrollLeft+=20,r.scrollLeft>=a&&(r.scrollLeft=0),t=requestAnimationFrame(e)};t=requestAnimationFrame(e)},o=()=>cancelAnimationFrame(t);r.addEventListener("mouseenter",o),r.addEventListener("touchstart",o),r.addEventListener("mouseleave",e),r.addEventListener("touchend",e);let s=e=>{document.querySelectorAll(".carousel-item img").forEach(e=>e.classList.remove("enlarged")),e.classList.add("enlarged"),setTimeout(()=>{e.classList.remove("enlarged")},3e3)};n.addEventListener("click",e=>{e=e.target.closest("img");e&&s(e)}),n.addEventListener("touchstart",e=>{e=e.target.closest("img");e&&s(e)}),e()}if(l&&serviceList.forEach(e=>{var t=document.createElement("div");t.className="service-category";let a=document.createElement("div"),s=(a.className="category-title",a.textContent=e.name,document.createElement("ul"));s.className="sub-services",e.services.forEach(e=>{var t=document.createElement("li");t.className="sub-card",t.innerHTML=`
          <a href="services.html?item=${e.id}">
            <img src="${e.img}" alt="${e.name}" />
            <span>${e.name}</span>
          </a>`,s.appendChild(t)}),a.addEventListener("click",()=>{document.querySelectorAll(".service-category .sub-services").forEach(e=>{e!==s&&(e.classList.remove("open"),e.style.maxHeight=null)}),document.querySelectorAll(".service-category .category-title").forEach(e=>{e!==a&&e.classList.remove("open")});var e=s.classList.toggle("open");a.classList.toggle("open"),s.style.maxHeight=e?s.scrollHeight+"px":null}),t.appendChild(a),t.appendChild(s),l.appendChild(t)}),i){let s={Cupboards:"Modular kitchens and custom storage solutions.","Glass Works":"Quality glass partitions and railings.",Blinds:"Range of blinds and curtains for every need.","False Ceiling":"Stylish designs to enhance your interiors.",MosquitoNet:"Durable nets for doors and windows.",Flooring:"Vinyl, wooden and carpet options.","Aluminium works":"Partitions, windows and more.","UPVC Work":"UPVC windows, doors and partitions."},a=document.createDocumentFragment();o=document.createElement("button");o.className="filter-btn active",o.dataset.filter="all",o.textContent="All",a.appendChild(o),serviceList.forEach(e=>{var t=document.createElement("button");t.className="filter-btn",t.dataset.filter=e.name,t.textContent=e.name,a.appendChild(t)}),c&&c.appendChild(a),serviceList.forEach(t=>{var e=document.createElement("div"),a=(e.className="service-card",e.dataset.category=t.name,t.services[0]);e.innerHTML=`
        <img src="${a.img}" alt="${t.name}">
        <h3>${t.name}</h3>
        <p>${s[t.name]||`Explore our ${t.name.toLowerCase()} solutions.`}</p>
        <button class="details-toggle btn">View Details</button>
      `,e.querySelector(".details-toggle").addEventListener("click",e=>{e.preventDefault(),u(t.services)}),i.appendChild(e)}),c&&c.addEventListener("click",e=>{e=e.target.closest(".filter-btn");if(e){c.querySelectorAll(".filter-btn").forEach(e=>e.classList.remove("active")),e.classList.add("active");let a=e.dataset.filter;i.querySelectorAll(".service-card").forEach(e=>{var t="all"===a||e.dataset.category===a;e.style.display=t?"":"none"})}});let t=new URLSearchParams(window.location.search).get("item");if(t){let a=serviceList.find(e=>e.services.some(e=>e.id===t));a&&(c&&(e=c.querySelector(`[data-filter="${a.name}"]`))&&(c.querySelectorAll(".filter-btn").forEach(e=>e.classList.remove("active")),e.classList.add("active")),i.querySelectorAll(".service-card").forEach(e=>{var t=e.dataset.category===a.name;e.style.display=t?"":"none"}),u(a.services,t))}}}),document.addEventListener("DOMContentLoaded",()=>{var e=document.getElementById("quoteForm");let n=document.getElementById("serviceSelect");"undefined"!=typeof serviceList&&n&&serviceList.forEach(a=>{a.services.forEach(e=>{var t=document.createElement("option");t.value=e.id,t.textContent=a.name+" - "+e.name,n.appendChild(t)})});var t=new URLSearchParams(window.location.search).get("service");t&&n&&(n.value=t),e.addEventListener("submit",e=>{e.preventDefault();var e=document.getElementById("name").value.trim(),t=document.getElementById("address").value.trim();let a=n.value,s=a;"undefined"!=typeof serviceList&&serviceList.forEach(e=>{var t=e.services.find(e=>e.id===a);t&&(s=e.name+" - "+t.name)});e=`Name: ${e}
Address: ${t}
Service: `+s,t="https://wa.me/919715032513?text="+encodeURIComponent(e);window.open(t,"_blank")})});
